services:
  path_breadcrumb_builder.breadcrumb_manager:
    class: Drupal\path_breadcrumb_builder\BreadcrumbsManager
    tags:
      - { name: service_collector, tag: path_breadcrumb_builder, call: addBuilder }
  path_breadcrumb_builder.path_builder:
    class: Drupal\path_breadcrumb_builder\PathBreadcrumbBuilder
    arguments: ['@path_breadcrumb_builder.breadcrumb_manager', '@title_resolver', '@path.validator', '@path_breadcrumb_builder.route_match_builder']
    tags:
      - { name: path_breadcrumb_builder, priority: 0 }
  path_breadcrumb_builder.menu_builder:
    class: Drupal\path_breadcrumb_builder\MenuBreadcrumbBuilder
    arguments: ['@plugin.manager.menu.link', '%path_breadcrumb_builder.target_identifiers%']
    tags:
      - { name: path_breadcrumb_builder, priority: 100 }
  path_breadcrumb_builder.route_match_builder:
    class: Drupal\path_breadcrumb_builder\RouteMatchBuilder
    arguments: ['@path_processor_manager', '@router']

parameters:
  path_breadcrumb_builder.target_identifiers:
    - main